# https://moonrepo.dev/docs/config/project
$schema: 'https://moonrepo.dev/schemas/project.json'

type: 'application'
language: 'rust'

tasks:
  build:
    command: 'cargo build --release'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'
    outputs:
      - 'target/release/backend'

  dev:
    command: 'cargo run'
    local: true

  check:
    command: 'cargo check'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'

  test:
    command: 'cargo test'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'

  fmt-check:
    extends: 'fmt'
    args: 'check'

  fmt:
    command: 'cargo fmt'
    inputs:
      - 'src/**/*'
    local: true

  clippy:
    command: 'cargo clippy -- -D warnings'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'
